jQuery(document).ready(function(t){"use strict";if("undefined"!=typeof astra){var a,i=astra.qv_loader,e=t(document).find(".ast-quick-view-bg"),n=t(document).find("#ast-quick-view-modal"),o=n.find("#ast-quick-view-content"),r=n.find("#ast-quick-view-close"),s=n.find(".ast-content-main-wrapper"),d=(s.width(),s.height(),function(){var a=t(document).find("#ast-quick-view-content"),i=a.find(".product .ast-qv-image-slider").first().height(),e=a.find(".product .summary.entry-summary"),n=e.css("content");void 0!==n&&544==n.replace(/[^0-9]/g,"")&&0!=i&&null!==i?e.css("height",i):e.css("height","")}),c=function(a,i){t.ajax({url:astra.ajax_url,data:{action:"ast_load_product_quick_view",product_id:i},dataType:"html",type:"POST",success:function(t){o.html(t),u()}})},u=function(){var a=o.find(".variations_form");if(a.trigger("check_variations"),a.trigger("reset_image"),!n.hasClass("open")){n.removeClass("loading").addClass("open");var i=l(),e=t("html");e.css("margin-right",i),e.addClass("ast-quick-view-is-open")}var r=n.find(".variations_form");r.length>0&&(r.wc_variation_form(),r.find("select").change());var s=n.find(".ast-qv-image-slider");s.find("li").length>1&&s.flexslider({animation:"slide"}),setTimeout(function(){d()},100),t(document).trigger("ast_quick_view_loader_stop")},l=function(){var a=t('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');t("body").append(a);var i=t("div",a).innerWidth();a.css("overflow-y","scroll");var e=t("div",a).innerWidth();return t(a).remove(),i-e},v=function(){t(document.body).on("click","#ast-quick-view-content .single_add_to_cart_button",this.onAddToCart).on("added_to_cart",this.updateButton)};v.prototype.onAddToCart=function(a){a.preventDefault();var i=t(this),e=t(this).val(),n=t('input[name="variation_id"]').val()||"",o=t('input[name="quantity"]').val();i.is(".single_add_to_cart_button")&&(i.removeClass("added"),i.addClass("loading"),""!=n?jQuery.ajax({url:astra.ajax_url,type:"POST",data:"action=astra_add_cart_single_product&product_id="+e+"&variation_id="+n+"&quantity="+o,success:function(a){t(document.body).trigger("wc_fragment_refresh"),t(document.body).trigger("added_to_cart",[i])}}):jQuery.ajax({url:astra.ajax_url,type:"POST",data:"action=astra_add_cart_single_product&product_id="+e+"&quantity="+o,success:function(a){t(document.body).trigger("wc_fragment_refresh"),t(document.body).trigger("added_to_cart",[i])}}))},v.prototype.updateButton=function(a,i){t(i=void 0!==i&&i)&&(t(i).removeClass("loading"),t(i).addClass("added"),!astra.is_cart&&0===t(i).parent().find(".added_to_cart").length&&astra.is_single_product&&t(i).after(' <a href="'+astra.cart_url+'" class="added_to_cart wc-forward" title="'+astra.view_cart+'">'+astra.view_cart+"</a>"))},window.addEventListener("resize",function(t){d()}),(a=t(".ast-qv-on-image-click .astra-shop-thumbnail-wrap .woocommerce-LoopProduct-link")).length>0&&a.each(function(a){t(this).attr("href","javascript:void(0)")}),t(document).off("click",".ast-quick-view-button, .ast-quick-view-text, .ast-qv-on-image-click .astra-shop-thumbnail-wrap .woocommerce-LoopProduct-link").on("click",".ast-quick-view-button, .ast-quick-view-text, .ast-qv-on-image-click .astra-shop-thumbnail-wrap .woocommerce-LoopProduct-link",function(a){a.preventDefault();var o=t(this),r=o.closest("li.product");if(r.hasClass("ast-qv-on-image-click"))var s=r.find(".ast-quick-view-data").data("product_id");else s=o.data("product_id");i&&(n.hasClass("loading")||n.addClass("loading"),e.hasClass("ast-quick-view-bg-ready")||e.addClass("ast-quick-view-bg-ready"),t(document).trigger("ast_quick_view_loading")),c(o,s)}),function(){t(".ast-content-main-wrapper").on("click",function(t){this===t.target&&a()}),t(document).keyup(function(t){27===t.keyCode&&a()}),r.on("click",function(t){t.preventDefault(),a()});var a=function(){e.removeClass("ast-quick-view-bg-ready"),n.removeClass("open").removeClass("loading"),t("html").removeClass("ast-quick-view-is-open"),t("html").css("margin-right",""),setTimeout(function(){o.html("")},600)}}(),d(),new v}});